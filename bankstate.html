<head>
    <title>The Bank of WillBot</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <style>
        * {
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        }

        .container {
            width: 75%;
            padding-left: 12.5%;
        }

        #param {
            width: 100%;
            display: inline-flex;
            justify-content: space-around;
        }

        table,
        td,
        th {
            border: 1px solid black;
            text-align: center;
        }
    </style>
</head>

<body>
    <br>
    <div style="display: flex; justify-content: center;">
        <div style="display: inline-flex;">
            <img height=100
                src="https://i.guim.co.uk/img/static/sys-images/Guardian/Pix/pictures/2009/4/29/1240996556472/exclamation-001.jpg?width=620&quality=85&auto=format&fit=max&s=1c6fbbdbc2878bbd9cbb8f4d9ea9ce67">
        </div>
        <div style="display: inline-flex;">
            <h1 style="display: inline;">The Bank of WillBot</h1>
        </div>
        <div style="display: inline-flex;">
            <img height=100
                src="https://i.guim.co.uk/img/static/sys-images/Guardian/Pix/pictures/2009/4/29/1240996556472/exclamation-001.jpg?width=620&quality=85&auto=format&fit=max&s=1c6fbbdbc2878bbd9cbb8f4d9ea9ce67">
        </div>
    </div>
    <hr>
    <br>
    <div class="container">
        <div id="param">
            <h3 id='ownername'>Account Owner: Loading...</h3>
            <h3 id='ownerid'>Account ID: Loading...</h3>
            <h3 id='ownerbal'>Account Balance: £0.00</h3>
        </div>
        <br>
        <hr>
        <br>
        <div style="text-align: center; width: 60%; transform: translateX(25%);">
            <h3 style="display: inline">Statement:</h3>
            <table id='statement' style="table-layout: fixed; width: 100%; border-collapse: collapse;">
                <tr style="text-align: center;">
                    <th class="top" width="20%"><b><i>Note</i></b></th>
                    <th class="top" width="20%"><b><i>Money In</i></b></th>
                    <th class="top" width="20%"><b><i>Money Out</i></b></th>
                    <th class="top" width="20%"><b><i>Date</i></b></th>
                    <th class="top" width="20%"><b><i>Time</i></b></th>
                </tr>
                <br>
                <tr id="loading">
                    <td colspan="5">
                        <a>Nothing to show here...</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <script>
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) { return pair[1]; }
            }
            return ("Loading...");
        }
        var id = getQueryVariable("id");
        var name = getQueryVariable("name");
        name = name.replace("%20", " ");
        var hasAccount = false;
        var statement;
        $('#ownername').html("Account Owner: "+ name);
        $('#ownerid').html("Account ID: "+id);
        $.ajax({
            url: 'shop.json',
            dataType: 'json',
            success: function(data){
                data = JSON.stringify(data);
                data = JSON.parse(data);
                var index = data.findIndex(x => x.userID == parseInt(id));
                if(index != -1){
                    hasAccount = true;
                    balance = data[index].money;
                    $("#usermoney").html("Account Balance: £"+balance.toFixed(2));
                }
            }
        });
    </script>
</body>